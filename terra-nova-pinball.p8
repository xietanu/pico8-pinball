pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
-- main
#include main.p8

--draw
#include draw/draw_collider.p8
#include draw/draw_spr.p8

--modes
#include modes/game.p8

--components
#include comp/flippers.p8
#include comp/walls.p8
#include comp/pinball.p8
#include comp/round_bumper.p8
#include comp/poly_bumper.p8
#include comp/targets.p8
#include comp/spinner.p8
#include comp/rollover.p8
#include comp/elem_group.p8
#include comp/capture.p8
#include comp/light.p8

--lib
#include lib/bounce.p8
#include lib/rotate_pnts.p8
#include lib/collision.p8
#include lib/pos_are_equal.p8
#include lib/gen_simple_collider.p8
#include lib/gen_collision_regions.p8
-- common
#include lib/common/2d_vectors.p8
#include lib/common/mod_base_1.p8
#include lib/common/point_collides_box.p8
#include lib/common/point_collides_poly.p8
#include lib/common/limit.p8
#include lib/common/sign.p8
#include lib/common/long_numbers.p8
#include lib/common/get_frame.p8


__gfx__
000000000000800000000000770000700700000022000000cccccccccccccccccccccccccccccccccc777777777777777ccccccccccccccccccccccccccccccc
000000000008280000000077700007650700000028800000cccccccccccccccccccccccccccc777777000000000000000777777ccccccccccccccccccccccccc
007007000008280000007777000000500000000028800000cccccccccccccccccccccccccc7700000000000000000d00000000077ccccccccccccccccccccccc
000770000082280000777770000000000000000028000000cccccccccccccccccccccccc77000000000000000000000000000000077ccccccccccccccccccccc
000770000082280077777000000000000000000028000000ccccccccccccccccccccc7770000000000000000000000000000000000077ccccccccccccccccccc
007007000082880072770000000000000000000000000000cccccccccccccccccccc7700000000000000000000000000000000000000077ccccccccccccccccc
000000000082880077700000000000000000000000000000ccccccccccccccccccc7700000000000000000000000000000000000000000077ccccccccccccccc
000000000822280000000000000000000000000000000000cccccccccccccccc777000000000000000cccccccc0000000000000000000000077ccccccccccccc
008888000888280000000000000000000000000022000000ccccccccccccccc7700000000000000ccccccccccc00000000000000000000000077cccccccccccc
0888e880082828000000000000000000000000002aa00000cccccccccccccc770000000000000ccc0000000ccc000000000000000000000000077ccccccccccc
882282e8082228000000000000000000000000002aa00000ccccccccccccc770000006000000cc00000000000c0000000000000000000000000077cccccccccc
882282e8828280000000000000000000000000002a000000cccccccccccc770000000000000cc000000000000000000000000000000000000000077ccccccccc
8e8888e8828800000000000000000000000000002a000000ccccccccccc77000000000000ccc000000d0000000000000000000000000000000000077cccccccc
88eeee880800000000000000000000000000000000000000ccccccccccc7000000000000cc00000000000000000000000000060000000000000000077ccccccc
088222800000000000000077770000000000000000000000ccccccccccc700000000000cc000000000000000000000000000000000000000000000007ccccccc
008888000000000077777777700000000000000000000000cccccccccc70000000000ccc00000000000000000000000000000000000000000050000077cccccc
00888800000000007277770000000000000000000d000000cccccccccc7000000000ccc00000000000000cd0000c0000000000000000000000000000077ccccc
087766800000000077700000000000000006000006000000ccccccccc7000000000ccc000000000c00000c00000c00000c0000000000000000000000007ccccc
87576678000000000000000000000000007670000d000000ccccccccc7000000000cc0000000000c00000c00000c00000c00000000000000000000000007cccc
877777780000000000000000000000000076700000000000ccccccccc700000000ccc0000000000c00000c00000c00000c00000000000000000000000007cccc
857776780000000000000000000000000076700000000000ccccccccc700000000cc00000000000c00000000000000000c000000000000000000000000007ccc
866777780000000000000000000000000076700004000000ccccccccc70000000cc000000c00000000000000000000000000000c000000000000000000007ccc
086557800000000000000000000000000006000044400000cccccccc700000000cc000000c00000000000000000000000000000c000000000000000000007ccc
008888000000000000000000000000000000000004000000cccccccc70000000cc0000000c0000000000000000000d000000000c000000000000000000007ccc
00888800000000000000000000000000000000000d000000cccccccc70000000cc0000000c00000000000000000000000000000c000000000000000000007ccc
08cccc800000000000000000000000000006000006000000cccccccc70050000cc00000000000000000000000000000000000000000000000000000000007ccc
877cc778000000007777770000000000077677000d000000cccccccc70000000cc00000000000000000000000000000000000000000000000000000060007ccc
8cbbbbc80000000072777777777000000776770000000000cccccccc70000000cc000000000000000000000000000000000000d0000000000000000000007ccc
89a777780000000077777700000000000776770000000000cccccccc70000000cc000000000000000000005000000000000000000000000000000000000c7ccc
86666bc8000000000000000000000000077677000a000000cccccccc70000000cc00000000000000000000000000000000000000000000000000000000c07ccc
08ddbb8000000000000000000000000000060000aaa00000cccccccc70000000cc0000060000000000000000000d060000000000000000000000000000c07ccc
00888800000000000000000000000000000000000a000000cccccccc70000000cc0000000000000050000000000000000000000000000000000000000c007ccc
008888000000000000000000000000000000000000000000cccccccc70000000cc0000000000000000000000000000000000000000000000000000000c007ccc
08eeeb800000000000000000000000000006000000000000ccccccccc7000000cc00000000000000000000000000000000000000000000000000000070007ccc
8bbbbbb80000000000000000000000000066600000000000ccccccccc7000000ccc0000000000000000000000000000000000000000000000050000070007ccc
82bbbee80000000000000000000000000066600000000000ccccccccc70000000cc0000000000000000000000000000000000000000000000000000770007ccc
82eeeeb80000000000000000000000000066600000000000ccccccccc70060000cc0000000000000006000000000000000000000005000000000000770007ccc
833bbbe80000000077700000000000000066600000000000ccccccccc700000000c0000000000000000000000000000000000000000000000000007c70007ccc
08222e800000000072777700000000000006000000000000cccccccccc70000000cc0000000000000000000000d0500000000000000000000000077c70007ccc
008888000000000077777777700000000000000000000000cccccccccc70000000cc00000000000000000000000000000000000000000000000077cc70007ccc
000000000000000000000077770000000000000000000000cccccccccc700000000c0000000000000000000000000000000000000000000000777ccc70007ccc
000000000000000000000000000000000006000000000000ccccccccccc70000000cc0000000000000000000000000000000d0000000000077cccccc70007ccc
000000000000000000000000000000000007000000000000ccccccccccc700000000c0000000000000000000000000000000000000000777cccccccc70007ccc
000000000000000000000000000000000007000000000000ccccccccccc70000000000000000000000000000000000000000000000777ccccccccccc70007ccc
000000000000000000000000000000000007000000000000cccccccccccc7000000000000000060000000000000000000000000077cccccccccccccc70007ccc
000000000000000000000000000000000007000000000000cccccccccccc70000000000000000000000000000000000000000777cccccccccccccccc70007ccc
000000000000000000000000000000000006000000000000ccccccccccccc7000000000000000005000000000060000000077ccccccccccccccccccc70007ccc
000000000000000000000000000000000000000000000000ccccccccccccc700000000000000000000000000000000000007cccccccccccccccccccc70007ccc
000800000000000077700000000000000000000000000000ccccccccccccc700000000000000000000000000000000000007cccccccccccccccccccc70007ccc
000800000000000072770000000000000000000000000000ccccccccccc770000000000000000000000000000000000000077ccccccccccccccccccc70007ccc
008780000000000077777000000000000000000000000000cccccccccc70000000000000000000000000000000000000000077cccccccccccccccccc70007ccc
008780000000000000777770000000000000000000000000cccccccc77000000000000000000000000000000000000000000077ccccccccccccccccc70007ccc
008280000000000000007777000000000000000000000000ccccccc700000060000000d000000000000000000500000000000077cccccccccccccccc70007ccc
082228000000000000000077700000000000000000000000ccccccc70000000000000000000000000000000000000000000000077ccccccccccccccc70007ccc
082228000000000000000000770000000000000000000000ccccccc700000000000000000000000000000000000000000000000077cccccccccccccc70007ccc
082228000000000000000000000000000000000000000000ccccccc7770000000000000000dd0000000000000000000000000000077ccccccccccccc70007ccc
082728000000000000000000000000000000000000000000cccccccccc7777000000000000d200000000000000000000000000000077cccccccc77cc70007ccc
087278000000000000000000000000000000000000000000cccccccccccccc7770000000001200000000000000000000000d000000077cccc777077c70007ccc
082228000000000000000000000000000000000000000000cccccccccccccccc7000000000120000000600000000000006000000000077cc7700007c70007ccc
822222800000000000000000000000000000000000000000cccccccccccccccc7000000000112000000000000000000000000000000007777000077c70007ccc
828282800000000000000000000000000000000000000000ccccccccccccccc7000000500011200000000000000000000000000000000070000d07cc70007ccc
828882800000000000000000000000000000000000000000ccccccccccccccc70000000000112000000000000000000000000000d0000000000007cc70007ccc
880008800000000000000000000000000000000000000000ccccccccccccccc70000000001112000000000000000d000000000000000000000007ccc70007ccc
800000800000000000000000000000000000000000000000ccccccccccccccc7000000d0011120000000000000000000000d00000000000000007ccc70007ccc
000000000000000000000000000000000000000000000000ccccccccccccccc7005000dd011120000000005000000000000d0000000000000007cccc70007ccc
000000000000000000000000000000000000000000000000cccccccccccccc70000000d22111200000000000000000000001200000000000007ccccc70007ccc
000000000000000000000000000000000000000000000000cccccccccccccc7000000011221110000d0000000000000000dd200000000dd0007ccccc70007cee
000000000000000000000000000000000000000000000000cccccccccccccc700000000112110000000000000000000000111200000dd11007cccccc70007eee
000000000000000000000000000000000000000000000000cccccccccccccc7000000001121100000000000111111110000112000011110007ccccccf000feee
000000000000000000000000000000000000000000000000ecccccccccccc7000000001112110000011111111111111111011200111110007ccccceef000feee
000000000000000000000000000000000000000000000000eeecccccccccc7000000111111100001111111111111111111111111111100007cccceeef000feee
000000000000000000000000000000000000000000000000eeeecceeccccc7000111111111111111111111111111111111111111111111007ceeeeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeef111111111111111111111111111111111111111111111111111feeeeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeef111111111111111111111111111111111111111111111111111feeeeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef1111111111111111111111111111111111111122222211111111feeeeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef11111111111111111111111111111111111111111112222221111feeeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef11111111112222211111111111555111111111111111111111111feeeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111112222211112222221111115551111111111111111111111111feeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111111111111111111122111115551111111111111111111111111feeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeef1111111111111111111111111115551111111111111111111111111feeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeef11111111111111111111111111155511111111111111111111111111feeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeef11111111111111111111111111155511111111111111111111111111feeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeff111111111111111111111111115551111111111111111111111111ffeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeff1111111111111111111111111555111111111111111111111111ffeeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeeff11111111111111111111111155511111111111111111111111ffeeeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeff111111111111111111111111111111111111111111111111ffeeeeeef000feee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeeff11111111111111111111111111111111111111111111111111ffeeeeef000feee
000000000000000000000000000000000000000000000000222222222eeeff1111111111111111111111111111111111111111111111111111ffeeeef000feee
00000000000000000000000000000000000000000000000022222222222ef111111111111111111111111111111111111111111111111111111feeeef000feee
000000000000000000000000000000000000000000000000272722222222f111111111111111111111111111111111111111111111111111111feeeef000feee
000000000000000000000000000000000000000000000000272722222442f111111111111111111111111111111111111111111111111111111feeeef000feee
000000000000000000000000000000000000000000000000277727272442f111111111111111111111111111111111111111111111111111111feeeef000feee
000000000000000000000000000000000000000000000000222722722222f111111111111111111111111111111111111111111111111111111feeeef000feee
000000000000000000000000000000000000000000000000222727272222f111e1111111111111111111111111111111111111111111111e111feeeef000feee
000000000000000000000000000000000000000000000000222222222222f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000277722222222f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000222722222442f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000227727272442f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000222722722222f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000277727272222f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000222222222222f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000277722222222f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000222722222442f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000277727272442f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000272222722222f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000277727272222f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000222222222222f111ee11111111111111111111111111111111111111111111ee111feeeef000feee
000000000000000000000000000000000000000000000000277222222222f1111ee111111111111111111111111111111111111111111ee1111feeeef000feee
000000000000000000000000000000000000000000000000227222222442f11111ee1111111111111111111111111111111111111111ee11111feeeef000feee
000000000000000000000000000000000000000000000000227227272442f111111eee111111111111111111111111111111111111eee111111feeeef000feee
000000000000000000000000000000000000000000000000227222722222f1111111eee1111111111111111111111111111111111eee1111111feeeef000feee
000000000000000000000000000000000000000000000000277727272222f11111111eee11111111111111111111111111111111eee11111111feeeef000feee
00000000000000000000000000000000000000000000000022222222222ef1111111111ee111111111111111111111111111111ee1111111111feeeefffffeee
000000000000000000000000000000000000000000000000222222222eeef11111111111ee1111111111111111111111111111ee11111111111feeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111111111111ee11111111111111111111111111ee111111111111feeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111f111111111ee111111111111111111111111ee111111111f111feeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111ff111111111ee1111111111111111111111ee111111111ff111feeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111fff111111111111111111111111111111111111111111fff111feeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111feff1111111111111111111111111111111111111111ffef111feeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111feeff11111111111111111111111111111111111111ffeef111feeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111feeeff111111111111111111111111111111111111ffeeef111feeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeef111feeeeff1111111111111111111111111111111111ffeeeef111feeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeefffffeeeeeff11111111111111111111111111111111ffeeeeefffffeeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeff111111111111111111111111111111ffeeeeeeeeeeeeeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeff1111111111111111111111111111ffeeeeeeeeeeeeeeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeff11111111111111111111111111ffeeeeeeeeeeeeeeeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeff111111111111111111111111ffeeeeeeeeeeeeeeeeeeeeeeeeee
000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeff1111111111111111111111ffeeeeeeeeeeeeeeeeeeeeeeeeeee
__map__
060708090a0b0c0d0e0f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
161718191a1b1c1d1e1f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
262728292a2b2c2d2e2f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
363738393a3b3c3d3e3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
464748494a4b4c4d4e4f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
565758595a5b5c5d5e5f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
666768696a6b6c6d6e6f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
767778797a7b7c7d7e7f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
868788898a8b8c8d8e8f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
969798999a9b9c9d9e9f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a6a7a8a9aaabacadaeaf00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b6b7b8b9babbbcbdbebf00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c6c7c8c9cacbcccdcecf00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d6d7d8d9dadbdcdddedf00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
e6e7e8e9eaebecedeeef00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f6f7f8f9fafbfcfdfeff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
